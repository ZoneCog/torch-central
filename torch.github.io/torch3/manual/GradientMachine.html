<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">

<HTML>
<HEAD>
   <TITLE>class  GradientMachine</TITLE>
   <META NAME="GENERATOR" CONTENT="DOC++ 3.4.8">
</HEAD>
<BODY BGCOLOR="#ffffff">

<H2>class  <A HREF="#DOC.DOCU">GradientMachine</A></H2></H2><BLOCKQUOTE>Gradient machine: machine which can be trained with a gradient descent.</BLOCKQUOTE>
<HR>

<H2>Inheritance:</H2>
<APPLET CODE="ClassGraph.class" WIDTH=600 HEIGHT=725>
<param name=classes value="CObject,MObject.html,CMachine,MMachine.html,CGradientMachine,MGradientMachine.html,CTemporalSubSampling,MTemporalSubSampling.html,CTemporalMean,MTemporalMean.html,CTemporalConvolution,MTemporalConvolution.html,CTanh,MTanh.html,CSumMachine,MSumMachine.html,CSpatialSubSampling,MSpatialSubSampling.html,CSpatialConvolution,MSpatialConvolution.html,CSoftPlus,MSoftPlus.html,CSoftMax,MSoftMax.html,CSigmoid,MSigmoid.html,CMixer,MMixer.html,CLogSoftMax,MLogSoftMax.html,CLogSigmoid,MLogSigmoid.html,CLogRBF,MLogRBF.html,CLogMixer,MLogMixer.html,CLinear,MLinear.html,CInputsSelect,MInputsSelect.html,CExp,MExp.html,CDistribution,MDistribution.html,CCriterion,MCriterion.html,CConnectedMachine,MConnectedMachine.html">
<param name=before value="M,M,M,M|_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,MR_,Mr_">
<param name=after value="Md_SP,Md_,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M,M">
<param name=indent value="0,1,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2">
<param name=arrowdir value="down">
</APPLET>
<HR>

<DL>
<P><DL>
<DT><H3>Public Fields</H3><DD><DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>int <B><A HREF="#DOC.107.1">n_inputs</A></B>
<DD><I>Frame size of inputs sequences</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>int <B><A HREF="#DOC.107.2">n_outputs</A></B>
<DD><I>Frame size of outputs sequences</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif><!1><A HREF="Parameters.html">Parameters</A>* <B><A HREF="#DOC.107.3">params</A></B>
<DD><I>Contains all parameters which will be updated with the gradient descent.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif><!1><A HREF="Parameters.html">Parameters</A>* <B><A HREF="#DOC.107.4">der_params</A></B>
<DD><I>Contains the derivatives for all parameters.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif><!1><A HREF="Sequence.html">Sequence</A>* <B><A HREF="#DOC.107.5">beta</A></B>
<DD><I>Contains the derivative with respect to the inputs</I>
</DL></P>

<P><DL>
<DT><H3>Public Methods</H3><DD><DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif> <B><A HREF="#DOC.107.6">GradientMachine</A></B>(int n_inputs_, int n_outputs_, int n_params_=0)
<DD><I>Initialize a gradient machine with <TT>n_inputs_</TT> for the input frame size, <TT>n_outputs_</TT> for the output frame size and <TT>n_params_</TT> parameters.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>virtual   void <B><A HREF="#DOC.107.7">iterInitialize</A></B>()
<DD><I>This function is called before each training iteration.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>virtual   void <B><A HREF="#DOC.107.8">forward</A></B>(<!1><A HREF="Sequence.html">Sequence</A>* <!1><A HREF="NLLMeasurer.html#DOC.98.1">inputs</A>)
<DD><I>Given a sequence, update <TT>outputs</TT>.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>virtual   void <B><A HREF="#DOC.107.9">backward</A></B>(<!1><A HREF="Sequence.html">Sequence</A>* <!1><A HREF="NLLMeasurer.html#DOC.98.1">inputs</A>, <!1><A HREF="Sequence.html">Sequence</A>* <!1><A HREF="QCMachine.html#DOC.131.5">alpha</A>)
<DD><I>Given a sequence, update the derivative with respect to the input (<TT>beta</TT>) and <TT>der_params</TT>.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>virtual   void <B><A HREF="#DOC.107.10">setPartialBackprop</A></B>(bool flag=true)
<DD><I>Set the partial backprop flag</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>virtual   void <B><A HREF="#DOC.107.11">frameForward</A></B>(int t, real* f_inputs, real* f_outputs)
<DD><I>Given a frame <TT>f_inputs</TT>, updates <TT>f_outputs</TT>.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>virtual   void <B><A HREF="#DOC.107.12">frameBackward</A></B>(int t, real* f_inputs, real* beta_, real* f_outputs, real* alpha_)
<DD><I>Given the <TT>f_inputs</TT> and the derivatives <TT>alpha_</TT> with respect to the outputs, updates the derivative with respect to the inputs (<TT>beta_</TT>) and <TT>der_params</TT>.</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>virtual   void <B><A HREF="#DOC.107.13">loadXFile</A></B>(<!1><A HREF="XFile.html">XFile</A>* <!1><A HREF="Measurer.html#DOC.35.1">file</A>)
<DD><I>By default, load the <TT>params</TT> field</I>
<DT>
<IMG ALT="[more]" BORDER=0 SRC=icon1.gif>virtual   void <B><A HREF="#DOC.107.14">saveXFile</A></B>(<!1><A HREF="XFile.html">XFile</A>* <!1><A HREF="Measurer.html#DOC.35.1">file</A>)
<DD><I>By default, save the <TT>params</TT> field</I>
</DL></P>

</DL>
<HR><H3>Inherited from <A HREF="Machine.html">Machine</A>:</H3>
<DL>
<P><DL>
<DT><H3>Public Fields</H3><DD><DT>
<IMG ALT="o" SRC=icon2.gif><!1><A HREF="Sequence.html">Sequence</A>* <B>outputs</B>
</DL></P>

<P><DL>
<DT><H3>Public Methods</H3><DD><DT>
<IMG ALT="o" SRC=icon2.gif>virtual   void <B>reset</B>()
<DT>
<IMG ALT="o" SRC=icon2.gif>virtual   void <B>setDataSet</B>(<!1><A HREF="DataSet.html">DataSet</A>* dataset_)
</DL></P>

</DL>
<HR><H3>Inherited from <A HREF="Object.html">Object</A>:</H3>
<DL>
<P><DL>
<DT><H3>Public Fields</H3><DD><DT>
<IMG ALT="o" SRC=icon2.gif><!1><A HREF="Allocator.html">Allocator</A>* <B>allocator</B>
</DL></P>

<P><DL>
<DT><H3>Public Methods</H3><DD><DT>
<IMG ALT="o" SRC=icon2.gif>void <B>addOption</B>(const char* <!1><A HREF="CmdOption.html#DOC.4.1">name</A>, int <!1><A HREF="Parameters.html#DOC.43.3">size</A>, void* <!1><A HREF="Vec.html#DOC.143.2">ptr</A>, const char* <!1><A HREF="CmdOption.html#DOC.4.3">help</A>="")
<DT>
<IMG ALT="o" SRC=icon2.gif>void <B>addIOption</B>(const char* <!1><A HREF="CmdOption.html#DOC.4.1">name</A>, int* <!1><A HREF="Vec.html#DOC.143.2">ptr</A>, int init_value, const char* <!1><A HREF="CmdOption.html#DOC.4.3">help</A>="")
<DT>
<IMG ALT="o" SRC=icon2.gif>void <B>addROption</B>(const char* <!1><A HREF="CmdOption.html#DOC.4.1">name</A>, real* <!1><A HREF="Vec.html#DOC.143.2">ptr</A>, real init_value, const char* <!1><A HREF="CmdOption.html#DOC.4.3">help</A>="")
<DT>
<IMG ALT="o" SRC=icon2.gif>void <B>addBOption</B>(const char* <!1><A HREF="CmdOption.html#DOC.4.1">name</A>, bool* <!1><A HREF="Vec.html#DOC.143.2">ptr</A>, bool init_value, const char* <!1><A HREF="CmdOption.html#DOC.4.3">help</A>="")
<DT>
<IMG ALT="o" SRC=icon2.gif>void <B>addOOption</B>(const char* <!1><A HREF="CmdOption.html#DOC.4.1">name</A>, <!1><A HREF="Object.html">Object</A>** <!1><A HREF="Vec.html#DOC.143.2">ptr</A>, <!1><A HREF="Object.html">Object</A>* init_value, const char* <!1><A HREF="CmdOption.html#DOC.4.3">help</A>="")
<DT>
<IMG ALT="o" SRC=icon2.gif>void <B>setOption</B>(const char* <!1><A HREF="CmdOption.html#DOC.4.1">name</A>, void* <!1><A HREF="Vec.html#DOC.143.2">ptr</A>)
<DT>
<IMG ALT="o" SRC=icon2.gif>void <B>setIOption</B>(const char* <!1><A HREF="CmdOption.html#DOC.4.1">name</A>, int option)
<DT>
<IMG ALT="o" SRC=icon2.gif>void <B>setROption</B>(const char* <!1><A HREF="CmdOption.html#DOC.4.1">name</A>, real option)
<DT>
<IMG ALT="o" SRC=icon2.gif>void <B>setBOption</B>(const char* <!1><A HREF="CmdOption.html#DOC.4.1">name</A>, bool option)
<DT>
<IMG ALT="o" SRC=icon2.gif>void <B>setOOption</B>(const char* <!1><A HREF="CmdOption.html#DOC.4.1">name</A>, <!1><A HREF="Object.html">Object</A>* option)
<DT>
<IMG ALT="o" SRC=icon2.gif>void <B>load</B>(const char* filename)
<DT>
<IMG ALT="o" SRC=icon2.gif>void <B>save</B>(const char* filename)
<DT>
<IMG ALT="o" SRC=icon2.gif>void* <B>operator new</B>(size_t <!1><A HREF="Parameters.html#DOC.43.3">size</A>, <!1><A HREF="Allocator.html">Allocator</A>* allocator_=NULL)
<DT>
<IMG ALT="o" SRC=icon2.gif>void* <B>operator new</B>(size_t <!1><A HREF="Parameters.html#DOC.43.3">size</A>, <!1><A HREF="Allocator.html">Allocator</A>* allocator_, void* ptr_)
<DT>
<IMG ALT="o" SRC=icon2.gif>void <B>operator delete</B>(void* <!1><A HREF="Vec.html#DOC.143.2">ptr</A>)
</DL></P>

</DL>

<A NAME="DOC.DOCU"></A>
<HR>
<H2>Documentation</H2>
<BLOCKQUOTE>Gradient machine: machine which can
be trained with a gradient descent.

<P>Gradient machines take in inputs sequences which have always the same
frame size, given by <TT>n_inputs</TT>, and outputs sequences which have always
the same frame size too, given by <TT>n_outputs</TT>.

<P></BLOCKQUOTE>
<DL>

<A NAME="n_inputs"></A>
<A NAME="DOC.107.1"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int n_inputs</B></TT>
<DD>Frame size of inputs sequences
<DL><DT><DD></DL><P>
<A NAME="n_outputs"></A>
<A NAME="DOC.107.2"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>int n_outputs</B></TT>
<DD>Frame size of outputs sequences
<DL><DT><DD></DL><P>
<A NAME="params"></A>
<A NAME="DOC.107.3"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="Parameters.html">Parameters</A>* params</B></TT>
<DD>Contains all parameters which will be
updated with the gradient descent.
Almost all machines will have only one
node in params.
<DL><DT><DD></DL><P>
<A NAME="der_params"></A>
<A NAME="DOC.107.4"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="Parameters.html">Parameters</A>* der_params</B></TT>
<DD>Contains the derivatives for all parameters.
Warning: <TT>params</TT> and <TT>der_params</TT>
must have the same structure.
<DL><DT><DD></DL><P>
<A NAME="beta"></A>
<A NAME="DOC.107.5"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B><!1><A HREF="Sequence.html">Sequence</A>* beta</B></TT>
<DD>Contains the derivative with respect to the inputs
<DL><DT><DD></DL><P>
<A NAME="GradientMachine"></A>
<A NAME="DOC.107.6"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B> GradientMachine(int n_inputs_, int n_outputs_, int n_params_=0)</B></TT>
<DD>Initialize a gradient machine with <TT>n_inputs_</TT> for the input frame size,
<TT>n_outputs_</TT> for the output frame size and <TT>n_params_</TT> parameters.
If <TT>n_inputs_</TT> is 0, no <TT>beta</TT> sequence will be allocated.
If <TT>n_outputs_</TT> is 0, no <TT>outputs</TT> sequence will be allocated.
<DL><DT><DD></DL><P>
<A NAME="iterInitialize"></A>
<A NAME="DOC.107.7"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>virtual   void iterInitialize()</B></TT>
<DD>This function is called before each
training iteration.
By default, do nothing.
<DL><DT><DD></DL><P>
<A NAME="forward"></A>
<A NAME="DOC.107.8"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>virtual   void forward(<!1><A HREF="Sequence.html">Sequence</A>* <!1><A HREF="NLLMeasurer.html#DOC.98.1">inputs</A>)</B></TT>
<DD>Given a sequence, update <TT>outputs</TT>.
By default, it uses <TT>frameForward()</TT>, to update each output frame
given each input frame. It supposes by default the number of input
and output frames is the same.
<DL><DT><DD></DL><P>
<A NAME="backward"></A>
<A NAME="DOC.107.9"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>virtual   void backward(<!1><A HREF="Sequence.html">Sequence</A>* <!1><A HREF="NLLMeasurer.html#DOC.98.1">inputs</A>, <!1><A HREF="Sequence.html">Sequence</A>* <!1><A HREF="QCMachine.html#DOC.131.5">alpha</A>)</B></TT>
<DD>Given a sequence, update the derivative with respect to the input (<TT>beta</TT>)
and <TT>der_params</TT>. If <TT>partial_backprop</TT> is false, don't update <TT>beta</TT>.
By default, it uses <TT>frameBackward()</TT>, to update each beta frame
given each input and alpha frame. It supposes by default the number of input
and output frames is the same.
<DL><DT><DD></DL><P>
<A NAME="setPartialBackprop"></A>
<A NAME="DOC.107.10"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>virtual   void setPartialBackprop(bool flag=true)</B></TT>
<DD>Set the partial backprop flag
<DL><DT><DD></DL><P>
<A NAME="frameForward"></A>
<A NAME="DOC.107.11"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>virtual   void frameForward(int t, real* f_inputs, real* f_outputs)</B></TT>
<DD>Given a frame <TT>f_inputs</TT>, updates <TT>f_outputs</TT>. Used to easily create new classes.
It is called by the default <TT>forward()</TT>, and it does nothing by default.
If your machine needs to do special things on sequence (if input sequence do not
have the same size as the output sequence), don't overload this function, but
overload <TT>forward()</TT>. <TT>t</TT> is the current frame to be forwarded.
<DL><DT><DD></DL><P>
<A NAME="frameBackward"></A>
<A NAME="DOC.107.12"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>virtual   void frameBackward(int t, real* f_inputs, real* beta_, real* f_outputs, real* alpha_)</B></TT>
<DD>Given the <TT>f_inputs</TT> and the derivatives <TT>alpha_</TT> with
respect to the outputs, updates the derivative with respect to the inputs (<TT>beta_</TT>)
and <TT>der_params</TT>.
It is called by the default <TT>backward()</TT>, and it does nothing by default.
If your machine needs to do special things on sequence (if input sequence do not
have the same size as the output sequence), don't overload this function, but
overload <TT>backward()</TT>. <TT>t</TT> is the current frame to be back-propagated.
<DL><DT><DD></DL><P>
<A NAME="loadXFile"></A>
<A NAME="DOC.107.13"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>virtual   void loadXFile(<!1><A HREF="XFile.html">XFile</A>* <!1><A HREF="Measurer.html#DOC.35.1">file</A>)</B></TT>
<DD>By default, load the <TT>params</TT> field
<DL><DT><DD></DL><P>
<A NAME="saveXFile"></A>
<A NAME="DOC.107.14"></A>
<DT><IMG ALT="o" BORDER=0 SRC=icon2.gif><TT><B>virtual   void saveXFile(<!1><A HREF="XFile.html">XFile</A>* <!1><A HREF="Measurer.html#DOC.35.1">file</A>)</B></TT>
<DD>By default, save the <TT>params</TT> field
<DL><DT><DD></DL><P></DL>
<HR>
<DL><DT><B>Direct child classes:
</B><DD><A HREF="TemporalSubSampling.html">TemporalSubSampling</A><BR>
<A HREF="TemporalMean.html">TemporalMean</A><BR>
<A HREF="TemporalConvolution.html">TemporalConvolution</A><BR>
<A HREF="Tanh.html">Tanh</A><BR>
<A HREF="SumMachine.html">SumMachine</A><BR>
<A HREF="SpatialSubSampling.html">SpatialSubSampling</A><BR>
<A HREF="SpatialConvolution.html">SpatialConvolution</A><BR>
<A HREF="SoftPlus.html">SoftPlus</A><BR>
<A HREF="SoftMax.html">SoftMax</A><BR>
<A HREF="Sigmoid.html">Sigmoid</A><BR>
<A HREF="Mixer.html">Mixer</A><BR>
<A HREF="LogSoftMax.html">LogSoftMax</A><BR>
<A HREF="LogSigmoid.html">LogSigmoid</A><BR>
<A HREF="LogRBF.html">LogRBF</A><BR>
<A HREF="LogMixer.html">LogMixer</A><BR>
<A HREF="Linear.html">Linear</A><BR>
<A HREF="InputsSelect.html">InputsSelect</A><BR>
<A HREF="Exp.html">Exp</A><BR>
<A HREF="Distribution.html">Distribution</A><BR>
<A HREF="Criterion.html">Criterion</A><BR>
<A HREF="ConnectedMachine.html">ConnectedMachine</A><BR>
</DL>

<DL><DT><DT><B>Author:</B><DD>Ronan Collobert (collober@idiap.ch)
<DT><B>See Also:</B><DD><!1><A HREF="StochasticGradient.html">StochasticGradient</A>
<BR><DD></DL><P><P><I><A HREF="index.html">Alphabetic index</A></I> <I><A HREF="HIER.html">HTML hierarchy of classes</A> or <A HREF="HIERjava.html">Java</A></I></P><HR>
<BR>
This page was generated with the help of <A HREF="http://docpp.sourceforge.net">DOC++</A>.
</BODY>
</HTML>
